<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>smoking-halim documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../" class="navbar-brand">smoking-halim documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">








<ol class="breadcrumb">
  <li class="breadcrumb-item">Injectables</li>
  <li class="breadcrumb-item" >HealthFacilityService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/modules/facilities/health-facility.service.ts</code>
        </p>





            <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#addFacility" >addFacility</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#assignPatientToFacility" >assignPatientToFacility</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#deleteFacility" >deleteFacility</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#facilityFacilityGroup" >facilityFacilityGroup</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#fetchFacilities" >fetchFacilities</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#fetchFacilitiesByDistance" >fetchFacilitiesByDistance</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#fetchFacilitiesNameIdOnly" >fetchFacilitiesNameIdOnly</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#fetchFacility" >fetchFacility</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#fetchNumberFacilitiesMatched" >fetchNumberFacilitiesMatched</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#healthSpecialistFacility" >healthSpecialistFacility</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#isFacilitiesSameGroup" >isFacilitiesSameGroup</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#isFacilityByIdExists" >isFacilityByIdExists</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#isFacilityByNameExists" >isFacilityByNameExists</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#isFacilityNameNotExists" >isFacilityNameNotExists</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#isPatientAndHealthSpecialistSameFacility" >isPatientAndHealthSpecialistSameFacility</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#updateFacility" >updateFacility</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section data-compodoc="block-constructor">
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(prismaService: <a href="../injectables/PrismaService.html" target="_self">PrismaService</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="21" class="link-to-prism">src/modules/facilities/health-facility.service.ts:21</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>prismaService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/PrismaService.html" target="_self" >PrismaService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addFacility"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>addFacility</b></span>
                        <a href="#addFacility"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addFacility(addFacilityDto: <a href="../classes/AddFacilityDto.html" target="_self">AddFacilityDto</a>, user: <a href="../classes/UserPlayloadResponse.html" target="_self">UserPlayloadResponse</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="121"
                                    class="link-to-prism">src/modules/facilities/health-facility.service.ts:121</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>addFacilityDto</td>
                                            <td>
                                                            <code><a href="../classes/AddFacilityDto.html" target="_self" >AddFacilityDto</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>user</td>
                                            <td>
                                                            <code><a href="../classes/UserPlayloadResponse.html" target="_self" >UserPlayloadResponse</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/Response.html" target="_self" >Promise&lt;HealthFacilityResponse&gt;</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="assignPatientToFacility"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>assignPatientToFacility</b></span>
                        <a href="#assignPatientToFacility"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>assignPatientToFacility(facilities: number[], patientId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="25"
                                    class="link-to-prism">src/modules/facilities/health-facility.service.ts:25</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>facilities</td>
                                            <td>
                                                        <code>number[]</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>patientId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;boolean&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="deleteFacility"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>deleteFacility</b></span>
                        <a href="#deleteFacility"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>deleteFacility(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="300"
                                    class="link-to-prism">src/modules/facilities/health-facility.service.ts:300</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/Response.html" target="_self" >Promise&lt;HealthFacilityResponse&gt;</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="facilityFacilityGroup"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>facilityFacilityGroup</b></span>
                        <a href="#facilityFacilityGroup"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>facilityFacilityGroup(facilityId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="407"
                                    class="link-to-prism">src/modules/facilities/health-facility.service.ts:407</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>facilityId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;FacilityGroup&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="fetchFacilities"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>fetchFacilities</b></span>
                        <a href="#fetchFacilities"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>fetchFacilities(searchWithOptionalPaginationDto: <a href="../classes/SearchWithOptionalPaginationDto.html" target="_self">SearchWithOptionalPaginationDto</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="62"
                                    class="link-to-prism">src/modules/facilities/health-facility.service.ts:62</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>searchWithOptionalPaginationDto</td>
                                            <td>
                                                            <code><a href="../classes/SearchWithOptionalPaginationDto.html" target="_self" >SearchWithOptionalPaginationDto</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../classes/PaginationFacilities.html" target="_self" >Promise&lt;PaginationFacilities&gt;</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="fetchFacilitiesByDistance"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>fetchFacilitiesByDistance</b></span>
                        <a href="#fetchFacilitiesByDistance"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>fetchFacilitiesByDistance(coordinatesDto: <a href="../classes/CoordinatesDto.html" target="_self">CoordinatesDto</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="182"
                                    class="link-to-prism">src/modules/facilities/health-facility.service.ts:182</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>coordinatesDto</td>
                                            <td>
                                                            <code><a href="../classes/CoordinatesDto.html" target="_self" >CoordinatesDto</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../classes/HealthFaclityByDistance.html" target="_self" >Promise&lt;HealthFaclityByDistance[]&gt;</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="fetchFacilitiesNameIdOnly"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>fetchFacilitiesNameIdOnly</b></span>
                        <a href="#fetchFacilitiesNameIdOnly"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>fetchFacilitiesNameIdOnly()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="110"
                                    class="link-to-prism">src/modules/facilities/health-facility.service.ts:110</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/Response.html" target="_self" >Promise&lt;NameAndIdResponse[]&gt;</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="fetchFacility"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>fetchFacility</b></span>
                        <a href="#fetchFacility"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>fetchFacility(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="198"
                                    class="link-to-prism">src/modules/facilities/health-facility.service.ts:198</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/Response.html" target="_self" >Promise&lt;HealthFacilityCountResponse&gt;</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="fetchNumberFacilitiesMatched"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>fetchNumberFacilitiesMatched</b></span>
                        <a href="#fetchNumberFacilitiesMatched"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>fetchNumberFacilitiesMatched(idDto: <a href="../classes/IdDto.html" target="_self">IdDto[]</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="347"
                                    class="link-to-prism">src/modules/facilities/health-facility.service.ts:347</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>idDto</td>
                                            <td>
                                                            <code><a href="../classes/IdDto.html" target="_self" >IdDto[]</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;number&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="healthSpecialistFacility"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>healthSpecialistFacility</b></span>
                        <a href="#healthSpecialistFacility"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>healthSpecialistFacility(healthSpecialistId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="362"
                                    class="link-to-prism">src/modules/facilities/health-facility.service.ts:362</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>healthSpecialistId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/Response.html" target="_self" >Promise&lt;HealthFacilityResponse&gt;</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isFacilitiesSameGroup"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>isFacilitiesSameGroup</b></span>
                        <a href="#isFacilitiesSameGroup"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>isFacilitiesSameGroup(facilities: <a href="../classes/IdDto.html" target="_self">IdDto[]</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="377"
                                    class="link-to-prism">src/modules/facilities/health-facility.service.ts:377</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>facilities</td>
                                            <td>
                                                            <code><a href="../classes/IdDto.html" target="_self" >IdDto[]</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;boolean&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isFacilityByIdExists"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>isFacilityByIdExists</b></span>
                        <a href="#isFacilityByIdExists"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>isFacilityByIdExists(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="321"
                                    class="link-to-prism">src/modules/facilities/health-facility.service.ts:321</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;boolean&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isFacilityByNameExists"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>isFacilityByNameExists</b></span>
                        <a href="#isFacilityByNameExists"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>isFacilityByNameExists(name: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="310"
                                    class="link-to-prism">src/modules/facilities/health-facility.service.ts:310</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>name</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;boolean&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isFacilityNameNotExists"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>isFacilityNameNotExists</b></span>
                        <a href="#isFacilityNameNotExists"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>isFacilityNameNotExists(name: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="332"
                                    class="link-to-prism">src/modules/facilities/health-facility.service.ts:332</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>name</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;boolean&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isPatientAndHealthSpecialistSameFacility"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>isPatientAndHealthSpecialistSameFacility</b></span>
                        <a href="#isPatientAndHealthSpecialistSameFacility"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>isPatientAndHealthSpecialistSameFacility(healthSpecialistId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, patientId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="420"
                                    class="link-to-prism">src/modules/facilities/health-facility.service.ts:420</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>healthSpecialistId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>patientId</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;boolean&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateFacility"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>updateFacility</b></span>
                        <a href="#updateFacility"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateFacility(updateFacilityDto: <a href="../classes/UpdateFacilityDto.html" target="_self">UpdateFacilityDto</a>, id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="253"
                                    class="link-to-prism">src/modules/facilities/health-facility.service.ts:253</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>updateFacilityDto</td>
                                            <td>
                                                            <code><a href="../classes/UpdateFacilityDto.html" target="_self" >UpdateFacilityDto</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>id</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/Response.html" target="_self" >Promise&lt;HealthFacilityResponse&gt;</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &#x27;@nestjs/common&#x27;;
import { FacilityGroup, Prisma } from &#x27;@prisma/client&#x27;;
import { plainToInstance } from &#x27;class-transformer&#x27;;
import { IdDto } from &#x27;src/common/dto/id.dto&#x27;;
import { SearchWithOptionalPaginationDto } from &#x27;src/common/dto/search-with-optional-pagination.dto&#x27;;
import { LanguageErrorEnum } from &#x27;src/common/enums/language-error.enum&#x27;;
import { MultiLanguageException } from &#x27;src/common/exception-filters/multi-language.exception&#x27;;
import { PrismaService } from &#x27;src/common/services/prisma.service&#x27;;
import { CoordinatesDto } from &#x27;src/modules/facilities/dto/coordinates.dto&#x27;;
import { HealthFaclityByDistance } from &#x27;src/modules/facilities/response/health-facility-by-distance.response&#x27;;
import { UserPlayloadResponse } from &#x27;src/modules/patients/response/user-playload.response&#x27;;
import { AddFacilityDto } from &#x27;./dto/add-facility.dto&#x27;;
import { UpdateFacilityDto } from &#x27;./dto/update-facility.dto&#x27;;
import { HealthFacilityCountResponse } from &#x27;./response/health-facility-count.reponse&#x27;;
import { HealthFacilityResponse } from &#x27;./response/health-facility.reponse&#x27;;
import { PaginationFacilities } from &#x27;src/common/responses/Paggination-data.response&#x27;;
import { HealthFacilitiesResponse } from &#x27;./response/health-facilities.reponse&#x27;;
import { NameAndIdResponse } from &#x27;src/common/responses/id-and-name.response&#x27;;

@Injectable()
export class HealthFacilityService {
  constructor(private readonly prismaService: PrismaService) {}

  //only to system admin and heatlth specialist
  async assignPatientToFacility(facilities: number[], patientId: number): Promise&lt;boolean&gt; {
    //check if user is linked to facility
    const patient &#x3D; await this.prismaService.patient.findUnique({
      where: {
        userId: patientId,
        facilityId: null,
      },
      select: {
        facilityId: true,
        userId: true,
        id: true,
      },
    });
    //if not link user to facility facilities[0]
    if (patient) {
      await this.prismaService.patient.update({
        where: {
          userId: patientId,
        },
        data: {
          facility: {
            connect: {
              id: facilities[0],
            },
          },
        },
        include: {
          facility: true,
        },
      });
      //.log(updatedUser);
      return true;
    }
    //else return false
    return false;
  }

  async fetchFacilities(searchWithOptionalPaginationDto: SearchWithOptionalPaginationDto): Promise&lt;PaginationFacilities&gt; {
    const { currentPage, sizePerPage, search } &#x3D; searchWithOptionalPaginationDto;

    const isPagination &#x3D; currentPage !&#x3D;&#x3D; undefined &amp;&amp; sizePerPage !&#x3D;&#x3D; undefined;
    const take &#x3D; isPagination ? sizePerPage : undefined;
    const skip &#x3D; isPagination ? (currentPage || 0) * sizePerPage : undefined;
    const where: Prisma.HealthFacilityWhereInput &#x3D; {
      name: {
        startsWith: search,
      },
    };

    const [facilities, totalItems] &#x3D; await this.prismaService.$transaction(async (tx) &#x3D;&gt; {
      const facilities &#x3D; await tx.healthFacility.findMany({
        select: {
          id: true,
          name: true,
          location: true,
          regimType: true,
          isFullDay: true,

          email: true,
          _count: {
            select: {
              patients: true,
              supportDoctors: true,
            },
          },
        },
        where,
        take,
        skip,
      });
      let count;
      if (isPagination)
        count &#x3D; await tx.healthFacility.aggregate({
          _count: {
            _all: true,
          },
        });
      return [facilities, count];
    });
    const serializedFacilities &#x3D; plainToInstance(HealthFacilitiesResponse, facilities, {
      excludeExtraneousValues: true,
      enableImplicitConversion: true,
    });
    return { data: serializedFacilities, totalItems: totalItems?._count?._all };
  }
  async fetchFacilitiesNameIdOnly(): Promise&lt;NameAndIdResponse[]&gt; {
    const facilities &#x3D; await this.prismaService.healthFacility.findMany({
      select: {
        id: true,
        name: true,
      },
    });

    return facilities;
  }

  async addFacility(addFacilityDto: AddFacilityDto, user: UserPlayloadResponse): Promise&lt;HealthFacilityResponse&gt; {
    const { isFullDay, location, name, regimType, latitude, longitude, phoneNumber, availabilities, email } &#x3D; addFacilityDto;

    await this.isFacilityByNameExists(name);

    return this.prismaService.$transaction(async (transaction) &#x3D;&gt; {
      const facility &#x3D; await transaction.healthFacility.create({
        data: { email, isFullDay, location, name, regimType, systemAdminId: user.adminId, latitude, longitude, phoneNumber },
        select: {
          id: true,
          name: true,
          latitude: true,
          longitude: true,
          location: true,
          regimType: true,
          isFullDay: true,

          phoneNumber: true,
          email: true,
        },
      });

      for (const availability of availabilities) {
        const { dayOfWeek, timeSlots } &#x3D; availability;
        const closed &#x3D; timeSlots.length &#x3D;&#x3D;&#x3D; 0 || !timeSlots ? true : false;

        await transaction.facilityAvailability.upsert({
          where: {
            facilityId_dayOfWeek: {
              facilityId: facility.id,
              dayOfWeek: dayOfWeek,
            },
          },
          update: {
            isClosed: closed,
            timeSlots: {
              deleteMany: {}, // Delete existing time slots
              create: timeSlots.map((timeSlot) &#x3D;&gt; ({
                startTime: timeSlot.startTime,
                endTime: timeSlot.endTime,
              })),
            },
          },
          create: {
            dayOfWeek,
            isClosed: closed,
            facility: { connect: { id: facility.id } },
            timeSlots: {
              create: timeSlots.map((timeSlot) &#x3D;&gt; ({
                startTime: timeSlot.startTime,
                endTime: timeSlot.endTime,
              })),
            },
          },
        });
      }

      return facility;
    });
  }

  async fetchFacilitiesByDistance(coordinatesDto: CoordinatesDto): Promise&lt;HealthFaclityByDistance[]&gt; {
    const dohaLatitude &#x3D; 25.2854;
    const dohaLongitude &#x3D; 51.531;
    const { latitude &#x3D; dohaLatitude, longitude &#x3D; dohaLongitude } &#x3D; coordinatesDto;
    // const astroLatitude &#x3D; 35.827354;
    // const astroLongitude &#x3D; 10.627997;, 10.605099
    // const baraCrepeLatitude &#x3D; 35.834063;
    // const baraCrepeLongitude &#x3D; 10.615811;
    const facilities: [HealthFaclityByDistance] &#x3D; await this.prismaService.$queryRaw&#x60;SELECT id,name,phoneNumber,location,latitude,longitude,
    Round(SQRT(POW (healthFacility.latitude - ${latitude}, 2) + POW(healthFacility.longitude - ${longitude}, 2))*100,5) as distance
    From HealthFacility healthFacility
    ORDER BY distance
    LIMIT 5&#x60;;
    return facilities;
  }

  async fetchFacility(id: number): Promise&lt;HealthFacilityCountResponse&gt; {
    const facilityGroup &#x3D; await this.facilityFacilityGroup(id);
    const facilityManagers &#x3D; await this.prismaService.admin.aggregate({
      where: {
        role: {
          OR: [
            {
              facilities: {
                some: {
                  id,
                },
              },
            },
            {
              ...(facilityGroup &amp;&amp; {
                facilityGroups: {
                  some: { id: facilityGroup.id },
                },
              }),
            },
          ],
        },
      },
      _count: {
        _all: true,
      },
    });
    const fetchHealthFacility &#x3D; await this.prismaService.healthFacility.findUnique({
      where: {
        id,
      },
      select: {
        _count: {
          select: {
            patients: true,
            supportDoctors: true,
          },
        },
        id: true,
        latitude: true,
        longitude: true,
        name: true,
        location: true,
        regimType: true,
        isFullDay: true,
        phoneNumber: true,
        email: true,
      },
    });

    const _count &#x3D; fetchHealthFacility._count;

    return { ...fetchHealthFacility, _count: { managersCount: facilityManagers._count._all, ..._count }, managersCount: facilityManagers._count._all };
  }

  async updateFacility(updateFacilityDto: UpdateFacilityDto, id: number): Promise&lt;HealthFacilityResponse&gt; {
    await this.isFacilityByIdExists(id);
    const { availabilities, ...updateFacilityData } &#x3D; updateFacilityDto;
    await this.isFacilityNameNotExists(updateFacilityDto.name, id);
    return this.prismaService.$transaction(async (transaction) &#x3D;&gt; {
      const updatedFacility &#x3D; await this.prismaService.healthFacility.update({
        where: { id },
        data: { ...updateFacilityData },
      });
      for (const availability of availabilities) {
        const { dayOfWeek, timeSlots } &#x3D; availability;
        const closed &#x3D; timeSlots.length &#x3D;&#x3D;&#x3D; 0 || !timeSlots ? true : false;

        await transaction.facilityAvailability.upsert({
          where: {
            facilityId_dayOfWeek: {
              facilityId: id,
              dayOfWeek: dayOfWeek,
            },
          },
          update: {
            isClosed: closed,
            timeSlots: {
              deleteMany: {}, // Delete existing time slots
              create: timeSlots.map((timeSlot) &#x3D;&gt; ({
                startTime: timeSlot.startTime,
                endTime: timeSlot.endTime,
              })),
            },
          },
          create: {
            dayOfWeek,
            isClosed: closed,
            facility: { connect: { id } },
            timeSlots: {
              create: timeSlots.map((timeSlot) &#x3D;&gt; ({
                startTime: timeSlot.startTime,
                endTime: timeSlot.endTime,
              })),
            },
          },
        });
      }
      return updatedFacility;
    });
  }

  async deleteFacility(id: number): Promise&lt;HealthFacilityResponse&gt; {
    await this.isFacilityByIdExists(id);

    return await this.prismaService.healthFacility.delete({
      where: {
        id,
      },
    });
  }

  async isFacilityByNameExists(name: string): Promise&lt;boolean&gt; {
    const facility &#x3D; await this.prismaService.healthFacility.findUnique({
      where: {
        name,
      },
      select: { id: true },
    });
    if (facility) throw new MultiLanguageException(LanguageErrorEnum.FACILITY_NAME_EXISTS);
    return true;
  }

  async isFacilityByIdExists(id: number): Promise&lt;boolean&gt; {
    const facility &#x3D; await this.prismaService.healthFacility.findUnique({
      where: {
        id,
      },
    });

    if (!facility) throw new MultiLanguageException(LanguageErrorEnum.FACILITY_NOT_FOUND);
    return true;
  }

  async isFacilityNameNotExists(name: string, id: number): Promise&lt;boolean&gt; {
    const facilityNameCheck &#x3D; await this.prismaService.healthFacility.findFirst({
      where: {
        id: {
          not: id,
        },
        name,
      },
      select: { id: true },
    });

    if (facilityNameCheck) throw new MultiLanguageException(LanguageErrorEnum.FACILITY_NAME_EXISTS);
    return true;
  }

  async fetchNumberFacilitiesMatched(idDto: IdDto[]): Promise&lt;number&gt; {
    const ids &#x3D; idDto.map((id) &#x3D;&gt; id.id);

    const facilities &#x3D; await this.prismaService.healthFacility.aggregate({
      _count: {
        _all: true,
      },
      where: {
        id: { in: ids },
      },
    });

    return facilities._count._all;
  }

  async healthSpecialistFacility(healthSpecialistId: number): Promise&lt;HealthFacilityResponse&gt; {
    const healthSpecialist &#x3D; await this.prismaService.healthSpecialist.findUnique({
      where: {
        id: healthSpecialistId,
      },
      select: {
        facility: {
          include: {},
        },
      },
    });

    return healthSpecialist.facility;
  }

  async isFacilitiesSameGroup(facilities: IdDto[]): Promise&lt;boolean&gt; {
    const firstId &#x3D; facilities[0].id;
    const facilitiesIds &#x3D; facilities.map((facility) &#x3D;&gt; facility.id);
    const facilityGroup &#x3D; await this.prismaService.healthFacility.findUnique({
      where: { id: firstId },
      select: {
        facilityGroup: {
          select: { id: true },
        },
      },
    });

    const facilitiesMatchGroupFacilitiesNb &#x3D; await this.prismaService.healthFacility.aggregate({
      _count: {
        _all: true,
      },
      where: {
        id: {
          in: facilitiesIds,
        },
        facilityGroup: {
          id: facilityGroup.facilityGroup.id,
        },
      },
    });
    if (facilitiesMatchGroupFacilitiesNb._count._all !&#x3D;&#x3D; facilities.length) throw new MultiLanguageException(LanguageErrorEnum.FACILITIES_NOT_SAME_GROUP);
    return true;
  }

  //give the facility id and return facility grp
  async facilityFacilityGroup(facilityId: number): Promise&lt;FacilityGroup&gt; {
    await this.isFacilityByIdExists(facilityId);

    return await this.prismaService.facilityGroup.findFirst({
      where: {
        facilities: {
          some: {
            id: facilityId,
          },
        },
      },
    });
  }
  async isPatientAndHealthSpecialistSameFacility(healthSpecialistId: number, patientId: number): Promise&lt;boolean&gt; {
    const healthFacility &#x3D; await this.prismaService.healthFacility.findFirst({
      where: {
        supportDoctors: {
          some: {
            id: healthSpecialistId,
          },
        },
        patients: {
          some: {
            id: patientId,
          },
        },
      },
      select: { id: true },
    });
    if (!healthFacility) throw new MultiLanguageException(LanguageErrorEnum.HEALTH_SPECIALIST_AND_USER_DO_NOT_SHARE_FACILITY);
    return true;
  }
}
</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'HealthFacilityService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
